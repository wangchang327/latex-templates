% Copyright 2020 王畅 (WANG Chang).
% Permission is granted to copy, distribute and/or modify this
% document under the terms of the Creative Commons
% Attribution 4.0 International (CC BY 4.0)
% http://creativecommons.org/licenses/by/4.0/

\documentclass{article}
\usepackage{ctex}
\usepackage{geometry}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{mathrsfs}
\usepackage{natbib}
\bibliographystyle{abbrv}
\usepackage{lastpage}
\usepackage{paralist}
\usepackage{booktabs}
\usepackage[colorlinks]{hyperref}
\geometry{left=3.17cm, right=3.17cm, top=2.54cm, bottom=2.54cm} % A4纸
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{float}
\usepackage{xcolor}
\usepackage{listings} % 代码
\usepackage{newtxtext}
\usepackage{newtxmath}
% 替换部分符号
\DeclareSymbolFont{CMlargesymbols}{OMX}{cmex}{m}{n}
\let\sumop\relax\let\prodop\relax
\DeclareMathSymbol{\sumop}{\mathop}{CMlargesymbols}{"50}
\DeclareMathSymbol{\prodop}{\mathop}{CMlargesymbols}{"51}
% 代码高亮
\lstset{
    language=C++,
    numberstyle=\tiny,
    basicstyle=\small\ttfamily,
    stringstyle=\color{purple},
    keywordstyle=\color{blue}\bfseries,
    commentstyle=\color{olive},
    directivestyle=\color{blue},
    frame=single,
    rulesepcolor=\color{red!20!green!20!blue!20}
}
\usepackage{algorithm2e}

\title{\bfseries Lab报告 \#1}
\author{张三 \quad 2332332333}
\date{2333年冬}

\fancypagestyle{plain}{
	\lhead{睡觉实习}
	\chead{}
	\rhead{Lab报告 \#1}
	\lfoot{张三: 2332332333}
	\cfoot{}
	\rfoot{第 \thepage 页,共 \pageref*{LastPage} 页}
}

\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}

\begin{document}
	\maketitle
    \pagestyle{plain}
    \tableofcontents

    \section{睡觉算法}
    \begin{algorithm}[H]
        \SetKwFunction{g}{sleep}
        \SetKwProg{Fn}{Function}{:}{end}
        \Fn{\g{}}{
            \For{}{
                do nothing
            }
            \Return 0 \tcc*{never reaches}
        }
    \end{algorithm}

    \section{睡觉代码}
    \begin{center}
        \begin{lstlisting}
printf("sleep!")
while (1) sleep();
        \end{lstlisting}
    \end{center}
\end{document}