\RequirePackage[CJKchecksingle, AutoFakeBold]{xeCJK} % 中文支持. AutoFakeBold 尤其重要, 可自动制造一些伪粗体; CJKchecksingle 是用来减少段末孤字带来的不美观情况
\RequirePackage{zhnumber} % 中文数字

\RequirePackage{fontspec}
\RequirePackage{anyfontsize} % 有助于使用特别大的字号

\setsansfont{TeX Gyre Heros} % 西文无衬线字体, 类似于 Arial

% 完全取决于个人偏好: 以下字体若无配备则可以改成 Fandol 系列或其他
% 中文主字体为思源宋体, 斜体使用方正楷体
\setCJKmainfont[
    ItalicFont=FZKai-Z03S
]{Noto Serif CJK SC}

% 中文无衬线字体为思源黑体, 黑体使用中黑, 斜体仍然为方正楷体
\setCJKsansfont[
    BoldFont=* Medium,
    ItalicFont=FZKai-Z03S
]{Noto Sans CJK SC}

% 中文等宽字体 (配合西文等宽字体) 使用方正楷体
\setCJKmonofont[
    ItalicFont=FZKai-Z03S
]{FZKai-Z03S}

% 以下定义一些中文名称的字体, 完全为个人偏好
\setCJKfamilyfont{kai}{FZKai-Z03S}

\setCJKfamilyfont{song}[
    ItalicFont=FZKai-Z03S
]{Noto Serif CJK SC}

\setCJKfamilyfont{fangsong}[
    ItalicFont=FZKai-Z03S
]{FZFangSong-Z02S}

\setCJKfamilyfont{xihei}{Noto Sans CJK SC}
\setCJKfamilyfont{hei}{Noto Sans CJK SC Medium}
\setCJKfamilyfont{hei2}[
    BoldFont=* Bold
]{Noto Sans CJK SC}

% 很粗的黑体
\setCJKfamilyfont{black}[
    BoldFont=* Black
]{Noto Sans CJK SC}

% 节标题用很粗的黑体
\setCJKfamilyfont{sectionfont}[
    BoldFont=* Black
]{Noto Sans CJK SC}

% 证明标题用中黑
\setCJKfamilyfont{pffont}[
    BoldFont=* Medium
]{Noto Sans CJK SC}

% 中文强调 \emph 用中黑
\setCJKfamilyfont{emfont}[
    BoldFont=* Medium
]{Noto Sans CJK SC}

\defaultfontfeatures{Ligatures=TeX} 
\XeTeXlinebreaklocale "zh"
\XeTeXlinebreakskip=0pt plus 1pt minus 0.1pt

% 定义常见的中文字体命令, 这一点 ctex 也会帮忙做, 所以不要加载 ctex
\newcommand\kaishu{\CJKfamily{kai}}
\newcommand\songti{\CJKfamily{song}}
\newcommand\heiti{\CJKfamily{hei}}
\newcommand\thmheiti{\CJKfamily{hei2}}
\newcommand\fangsong{\CJKfamily{fangsong}}
\renewcommand{\em}{\bfseries\CJKfamily{emfont}} % 中文强调用粗体而不是楷体. 如果使用了这个, 需在参考文献引入之前改回来, 否则不美观
